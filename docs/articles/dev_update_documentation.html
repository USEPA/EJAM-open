<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Updating Documentation • EJAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Updating Documentation">
<meta name="description" content="Steps for updating the web-based documentation/help docs">
<meta property="og:description" content="Steps for updating the web-based documentation/help docs">
<meta property="og:image" content="https://usepa.github.io/EJAM-open/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/0_whatis.html">What is EJAM?</a></li>
    <li><a class="dropdown-item" href="../articles/0_webapp.html">Accessing the Web App</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/1_installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/2_quickstart.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/3_analyzing.html">Using EJAM for Analysis in R</a></li>
    <li><a class="dropdown-item" href="../articles/testdata.html">Examples of Input/Output Files &amp; Data</a></li>
    <li><a class="dropdown-item" href="../articles/distances.html">Comparing Distances (Choosing a Radius)</a></li>
    <li><a class="dropdown-item" href="../articles/naics.html">NAICS (Industries)</a></li>
    <li><a class="dropdown-item" href="../articles/zipcodes.html">Zipcodes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For package/app developers</h6></li>
    <li><a class="dropdown-item" href="../articles/dev_deploy-app.html">Deploying the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev_run-shinytests.html">Testing EJAM App with shinytest2</a></li>
    <li><a class="dropdown-item" href="../articles/dev_run-unit-tests.html">Testing EJAM Functions with Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update-datasets.html">Updating EJAM Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update_documentation.html">Updating Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update-package.html">Updating the Package as a New Release</a></li>
    <li><a class="dropdown-item" href="../articles/dev_future_plans.html">Future Plans and Ideas for EJAM</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Updating Documentation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM-open/blob/HEAD/vignettes/dev_update_documentation.Rmd" class="external-link"><code>vignettes/dev_update_documentation.Rmd</code></a></small>
      <div class="d-none name"><code>dev_update_documentation.Rmd</code></div>
    </div>

    
    
<p>This document addresses how to update the documentation supporting
the package.</p>
<div class="section level2">
<h2 id="updating-package-documentation">Updating package documentation<a class="anchor" aria-label="anchor" href="#updating-package-documentation"></a>
</h2>
<p>The R package is documented in webpages (and in standard help
documents viewable in RStudio). Documentation will generally need to be
updated in preparation for a new release of the package. Updates may be
needed in the following:</p>
<ol style="list-style-type: decimal">
<li><p><a href="#package-overall-package-wide-information-documents">Package:
overall, package-wide information/ documents</a></p></li>
<li><p><a href="#functions-reference-docs-explaining-the-r-functions">Functions:
reference docs explaining the R functions</a></p></li>
<li><p><a href="#datasets-reference-docs-explaining-the-datasets">Datasets:
reference docs explaining the datasets</a> (in EJAM/R/data_*.R
files)</p></li>
<li><p><a href="#articles-vignettes-helping-r-users-with-the-package">Articles:
vignettes helping R users with the package</a> (in
<code>EJAM/vignettes/*.Rmd</code>)</p></li>
<li><p><a href="#user-guide-help-for-people-using-the-web-app">User
Guide: help for people using the web app</a> (in
<code>EJAM/inst/app/www/</code> as a .pdf file)</p></li>
<li><p><a href="#spell-checking-package-wide">Spell-checking
package-wide</a></p></li>
<li><p><a href="#website-web-pages-providing-all-of-the-above-in-html-format">Website:
web pages providing all of the above in html format</a>, via the
<a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> package</p></li>
</ol>
<p>Each is explained below:</p>
<div class="section level3">
<h3 id="package-overall-package-wide-information-documents">Package: overall, package-wide information/ documents<a class="anchor" aria-label="anchor" href="#package-overall-package-wide-information-documents"></a>
</h3>
<ul>
<li><p>Package-wide documentation files can be updated/edited and
include the following: <code>DESCRIPTION</code>, <code>README.Rmd</code>
(for README, <strong>edit the README<u>.Rmd</u><em>NOT</em> the
README.<u>md</u> file</strong>), R/EJAM-package.R (for
<code>?EJAM-package</code>), <code>NEWS.md</code> used to make <a href="../news/index.html">NEWS</a>, <code>CONTRIBUTING.md</code> used to
make <a href="../CONTRIBUTING.html">CONTRIBUTING</a>, <a href="../LICENSE.html">LICENSE</a> based on
<code>inst/LICENSE.md</code>, <a href="../authors.html#citation">CITATION</a> based on
<code>inst/CITATION</code>, and others.</p></li>
<li><p>Some of these are used by and shown by the github.com repository,
notably the <code>README.md</code> that is generated from the
<code>README.Rmd</code> file and appears on the github repository as <a href="%60r%20paste0(code_reponame_url,%20%22?tab=readme-ov-file#readme%22)%60">README</a>
and in the pkgdown site as <a href="../index.html">README</a>, and the
<code>DESCRIPTION</code> file that stores package version number and
URLs of the package repository, etc.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="functions-reference-docs-explaining-the-r-functions">Functions: reference docs explaining the R functions<a class="anchor" aria-label="anchor" href="#functions-reference-docs-explaining-the-r-functions"></a>
</h3>
<ul>
<li><p><a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> package tags define the documentation in
the R/*.R files that contain the source code and documentation of
functions and datasets.</p></li>
<li><p>While many functions or objects have their own .R files, some .R
files contain code and documentation for multiple functions, so not
every function has a .R file of its own.</p></li>
<li><p>some utility/helper functions, mostly not exported, are stored in
files prefixed with “utils_” such as <code>R/utils_indexblocks.R</code>
documenting <code><a href="../reference/indexblocks.html">indexblocks()</a></code> (but not all helper functions are
in files named that way).</p></li>
<li><p>you might find it useful to check docs with
<code><a href="https://rdrr.io/r/tools/QC.html" class="external-link">tools::checkDocFiles</a></code>(“EJAM”)</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="datasets-reference-docs-explaining-the-datasets">Datasets: reference docs explaining the datasets<a class="anchor" aria-label="anchor" href="#datasets-reference-docs-explaining-the-datasets"></a>
</h3>
<ul>
<li><p>all datasets are documented in the files named with a prefix of
“data_” such as <code>R/data_blockgroupstats.R</code> which documents
the <code><a href="../reference/blockgroupstats.html">?blockgroupstats</a></code> dataset.</p></li>
<li><p>most dataset documentation is created/updated alongside the code
that created or updates those datasets. That is best done starting with
the overarching file called
<code>data-raw/datacreate_0_UPDATE_ALL_DATASETS.R</code> which helps
walk through updating various datasets as needed and their documentation
is often updated in that same process.</p></li>
<li><p>Many <code>R/*.R</code> files for datasets are created
automatically, not edited by hand, through the
<code>dataset_documenter()</code> function as used in the scripts within
<code>data-raw/datacreate_*.R</code> while others are updated by editing
the .R file directly.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="articles-vignettes-helping-r-users-with-the-package">Articles: vignettes helping R users with the package<a class="anchor" aria-label="anchor" href="#articles-vignettes-helping-r-users-with-the-package"></a>
</h3>
<ul>
<li><p>Articles (called vignettes, here) are written/edited as .Rmd
files in the <code>vignettes</code> folder. You can test one using
something like <code><a href="https://pkgdown.r-lib.org/reference/build_articles.html" class="external-link">pkgdown::build_article()</a></code> before trying to
rebuild the whole pkgdown site.</p></li>
<li><p>New articles or renamed files require edits to the
<code>_pkgdown.yml</code> file also.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="user-guide-help-for-people-using-the-web-app">User Guide: help for people using the web app<a class="anchor" aria-label="anchor" href="#user-guide-help-for-people-using-the-web-app"></a>
</h3>
<ul>
<li>If you change the UI then new screenshots are needed for a new
version of the User Guide that was stored as a .pdf document.</li>
</ul>
</div>
<div class="section level3">
<h3 id="spell-checking-package-wide">Spell-checking package-wide<a class="anchor" aria-label="anchor" href="#spell-checking-package-wide"></a>
</h3>
<ul>
<li>To run a spell check (see terms flagged as possible problems)</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">spelling</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/spelling//reference/spell_check_package.html" class="external-link">spell_check_package</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      frq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">found</span>, <span class="kw">function</span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">)</span><span class="op">}</span><span class="op">)</span>, </span>
<span>      word <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">word</span><span class="op">)</span></span>
<span>    <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">frq</span><span class="op">)</span>, <span class="op">]</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>    <span class="va">x</span></span></code></pre></div>
<ul>
<li><p>Then you can use ctrl-shift-F to search in all files for a
flagged term to check if it is actually a problem</p></li>
<li><p>If you wanted to update the WORDLIST (list of words to ignore
spelling of)</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="co"># 1. Add obvious dataset names documented to the WORDLIST</span></span>
<span>    <span class="va">datanames</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">'\\.R$'</span>, <span class="st">''</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">'^data_'</span>, <span class="st">''</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="st">'./R'</span>, pattern <span class="op">=</span> <span class="st">'^data_.*R'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">datanames</span> <span class="op">=</span> <span class="va">datanames</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'aaaaaaaaaaaaa|xxxxxxxxxx'</span>, <span class="va">datanames</span><span class="op">)</span><span class="op">]</span></span>
<span>    <span class="co"># 2. Add names of functions to the WORDLIST</span></span>
<span>    <span class="va">funcnames</span> <span class="op">=</span> <span class="fu">EJAM</span><span class="fu">:::</span><span class="fu"><a href="../reference/functions_in_pkg.html">functions_in_pkg</a></span><span class="op">(</span> <span class="st">'EJAM'</span> <span class="op">)</span><span class="op">$</span><span class="va">object</span></span>
<span>    <span class="va">wordlist</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">'inst/WORDLIST'</span><span class="op">)</span></span>
<span>    <span class="va">wordlist</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">union</a></span><span class="op">(</span><span class="va">wordlist</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">datanames</span>, <span class="va">funcnames</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># Write the revised list of words to the file</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">wordlist</span>, <span class="st">'inst/WORDLIST'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="website-web-pages-providing-all-of-the-above-in-html-format">Website: web pages providing all of the above in html format<a class="anchor" aria-label="anchor" href="#website-web-pages-providing-all-of-the-above-in-html-format"></a>
</h3>
<p>The web-based documentation pages should be updated right after any
of the above are edited/created. These pkgdown-based webpages should be
updated by someone who is managing the package, as follows:</p>
<ul>
<li><p>The first step in updating those web pages is updating the yml
file. The web-based documentation pages are organized by a file called
<code>_pkgdown.yml</code> – see
<code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_pkgdown_config()</a></code> – which specifies the
contents of the webpages of documentation, such as the names of any
vignettes files to be shown in the list of articles, which functions are
included in the reference pages index, etc. Any new or removed or
renamed functions/ vignettes/ datasets, or changes in what is exported,
will require edits to the .yml file.</p></li>
<li><p>The pkgdown-based webpages should be updated by someone who is
managing the package, and they should use the
<code>update_pkgdown()</code> function found in
<code>data-raw/datacreate_0_UPDATE_ALL_DOCUMENTATION_pkgdown.R</code>
You have to <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> that file and then use the function
that it defines. Via that function, the pages get rebuilt by the
<a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> R package, based on the above files and all other
documentation from .R and .md files. For more information about using
the <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> package to create documentation in the form
of webpages, see <a href="https://pkgdown.r-lib.org/articles/pkgdown.html" class="external-link">pkgdown
articles</a>. The documentation is created/updated using the
<a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> and <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> R packages, which
read information from the .R files in the R folder, from .Rmd file
vignettes (aka “articles”) in the vignettes folder, and from the
<code>_pkgdown.yml</code> file in the root folder of the source package.
The <a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a> package reads the .R files to create the .Rd
files in the <code>man/</code> directory. The <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
package uses all those files as well as <code>DESCRIPTION</code> and
others, to generate a website for the package, first created as files in
the <code>docs/</code> folder, which are then published via github
actions and the github repository settings, to be hosted on GitHub
Pages. The packages <a href="https://devtools.r-lib.org/" class="external-link">devtools</a> and <a href="https://usethis.r-lib.org" class="external-link">usethis</a>
are also relevant.</p></li>
<li><p>the package’s github repository settings define which branch and
which folder should hold the html files for deployment (see github and
pkgdown documentation on that)</p></li>
<li><p>the package’s Github Actions can be used to deploy the webpages
when triggered by an event like any push to the main branch, for
example.</p></li>
<li><p>depending on which folder you publish/deploy from, you might have
to remove that folder from <code>.gitignore</code> in case it was listed
there via some <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> or <a href="https://usethis.r-lib.org" class="external-link">usethis</a>
function.</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>2025</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.3</p>
</div>

    </footer>
</div>





  </body>
</html>
