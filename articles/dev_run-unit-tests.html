<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Testing EJAM Functions with Unit Tests • EJAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Testing EJAM Functions with Unit Tests">
<meta name="description" content="How to run the suite of {testthat} unit tests">
<meta property="og:description" content="How to run the suite of {testthat} unit tests">
<meta property="og:image" content="https://usepa.github.io/EJAM-open/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/0_whatis.html">What is EJAM?</a></li>
    <li><a class="dropdown-item" href="../articles/0_webapp.html">Accessing the Web App</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/1_installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/2_quickstart.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/3_analyzing.html">Using EJAM for Analysis in R</a></li>
    <li><a class="dropdown-item" href="../articles/testdata.html">Examples of Input/Output Files &amp; Data</a></li>
    <li><a class="dropdown-item" href="../articles/distances.html">Comparing Distances (Choosing a Radius)</a></li>
    <li><a class="dropdown-item" href="../articles/naics.html">NAICS (Industries)</a></li>
    <li><a class="dropdown-item" href="../articles/zipcodes.html">Zipcodes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For package/app developers</h6></li>
    <li><a class="dropdown-item" href="../articles/dev_deploy-app.html">Deploying the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev_run-shinytests.html">Testing EJAM App with shinytest2</a></li>
    <li><a class="dropdown-item" href="../articles/dev_run-unit-tests.html">Testing EJAM Functions with Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update-datasets.html">Updating EJAM Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update_documentation.html">Updating Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update-package.html">Updating the Package as a New Release</a></li>
    <li><a class="dropdown-item" href="../articles/dev_future_plans.html">Future Plans and Ideas for EJAM</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Testing EJAM Functions with Unit Tests</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM-open/blob/main/vignettes/dev_run-unit-tests.Rmd" class="external-link"><code>vignettes/dev_run-unit-tests.Rmd</code></a></small>
      <div class="d-none name"><code>dev_run-unit-tests.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="notes-for-developers-on-writing-or-running-unit-tests-in-this-package">Notes for developers, on writing or running unit tests in this
package<a class="anchor" aria-label="anchor" href="#notes-for-developers-on-writing-or-running-unit-tests-in-this-package"></a>
</h2>
<div class="section level3">
<h3 id="checking-test-coverage-where-more-unit-tests-need-to-be-written">Checking test coverage (where more unit tests need to be
written)<a class="anchor" aria-label="anchor" href="#checking-test-coverage-where-more-unit-tests-need-to-be-written"></a>
</h3>
<p>Some functions in the package have incomplete unit test coverage as
of version 2.32.4 / mid 2025, so ideally more unit tests would be added
in those cases.</p>
<p>You can see a grouped, organized list of unit test files <em>within
the source code</em> of a function test_interactively(), in
<strong><code>EJAM/tests/test_interactively.R</code></strong></p>
<p>You should check which functions have adequate unit tests. One quick
but imperfect way is by using the rough draft function and notes found
at <strong><code>EJAM/tests/test_coverage_check.R</code></strong>. The
test_interactively() function noted above already prompts for using it,
but you could separately <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> it and use it.</p>
<p>Note it is a bit tedious to figure out which functions have unit
tests since there is not a 1-to-1 relationship between functions like
xyz() vs the EJAM/R/xyz.R files defining functions vs
EJAM/tests/testthat/test-xyz.R files containing unit tests.</p>
<p>Also see the <a href="https://covr.r-lib.org/" class="external-link">covr package</a> and
<code>covr::package_coverage()</code> and the related RStudio addin.</p>
</div>
<div class="section level3">
<h3 id="adding-unit-tests-for-new-functions-or-where-unit-tests-not-yet-written">Adding unit tests (for new functions or where unit tests not yet
written)<a class="anchor" aria-label="anchor" href="#adding-unit-tests-for-new-functions-or-where-unit-tests-not-yet-written"></a>
</h3>
<p>Unit tests should be written when the occur:</p>
<ul>
<li><p>where an existing function has no unit tests</p></li>
<li><p>where an existing function has only limited tests, and e.g., some
combinations of parameter settings have not been tested in unit
tests</p></li>
<li><p>while a new function is being written</p></li>
</ul>
<p>See <a href="https://testthat.r-lib.org" class="external-link uri">https://testthat.r-lib.org</a> and
<code><a href="https://usethis.r-lib.org/reference/use_r.html" class="external-link">usethis::use_test()</a></code> for information on how to add unit
tests. The unit tests are in the <code>EJAM/tests</code> and
<code>EJAM/tests/testthat</code> folders.</p>
<div class="section level4">
<h4 id="updating-unit-tests-when-functions-are-updated">Updating unit tests (when functions are updated)<a class="anchor" aria-label="anchor" href="#updating-unit-tests-when-functions-are-updated"></a>
</h4>
<p>Unit tests should be changed if necessary in these situations:</p>
<ul>
<li><p>while an existing function is being modified, such as when the
function’s expected outputs/ warnings/ errors change.</p></li>
<li><p>if the web app UI changes - then special tests of the web app
functionality can be created as explained in <a href="dev_run-shinytests.html">Testing EJAM App with shinytest2</a>.
Also note that any screenshots for any <u>User Guide</u> would need to
be updated if the UI changes.</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="running-unit-tests">Running unit tests<a class="anchor" aria-label="anchor" href="#running-unit-tests"></a>
</h3>
<p>There are numerous unit tests in the
<code>EJAM/tests/testthat/</code> folder that you can run and add to as
needed. They can be run automatically by the
<code><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">devtools::test()</a></code> function.</p>
<p>However, instead of running all the unit tests (run in alphabetical
order by default), you might want to test only some groups of related
functions that you are working on, and see a summary of which tests in
which files from which groups are passing, skipped, etc. To do this,
note there is a file called
<strong><code>EJAM/tests/test_interactively.R</code></strong> that you
can <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> and then you can use that function to run the
unit tests interactively.</p>
<p>Assuming you want to use that function, whenever you add or rename or
delete unit test files in the <code>EJAM/tests/testthat/</code> folder
you need to edit the list of test file names in the source code of that
function, test_interactively() or you can try to use it and it will stop
and tell you which files are missing from the list in the source code in
<code>EJAM/tests/test_interactively.R</code></p>
</div>
<div class="section level3">
<h3 id="running-tests-of-the-web-app-functionality">Running tests of the web app functionality<a class="anchor" aria-label="anchor" href="#running-tests-of-the-web-app-functionality"></a>
</h3>
<p>There are recorded interactions used as tests of the web app, as
explained in <a href="dev_run-shinytests.html">Testing EJAM App with
shinytest2</a>.</p>
</div>
<div class="section level3">
<h3 id="running-unit-tests-via-github-workflow">Running unit tests via github workflow<a class="anchor" aria-label="anchor" href="#running-unit-tests-via-github-workflow"></a>
</h3>
<p>There is also a github workflow in the package that runs unit tests,
automatically triggered by certain events, such as a pull request to the
main or development branch. See
<code>EJAM/.github/workflows/run-test.yaml</code></p>
</div>
<div class="section level3">
<h3 id="other-notes">Other notes<a class="anchor" aria-label="anchor" href="#other-notes"></a>
</h3>
<p>Be aware of whether the tests are using the last-installed version of
the package or the latest, possibly recently-edited, local source
package version that <code><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">devtools::load_all()</a></code> may be have
loaded.</p>
<p>Some functions relied on the EJScreen API and if the API is not
available, those tests will be skipped or would fail.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>2025</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.4</p>
</div>

    </footer>
</div>





  </body>
</html>
