<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Deploying the Web App • EJAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Deploying the Web App">
<meta name="description" content="Updating and deploying/hosting the shiny app">
<meta property="og:description" content="Updating and deploying/hosting the shiny app">
<meta property="og:image" content="https://usepa.github.io/EJAM-open/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/0_whatis.html">What is EJAM?</a></li>
    <li><a class="dropdown-item" href="../articles/0_webapp.html">Accessing the Web App</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/1_installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/2_quickstart.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/3_analyzing.html">Using EJAM for Analysis in R</a></li>
    <li><a class="dropdown-item" href="../articles/testdata.html">Examples of Input/Output Files &amp; Data</a></li>
    <li><a class="dropdown-item" href="../articles/distances.html">Comparing Distances (Choosing a Radius)</a></li>
    <li><a class="dropdown-item" href="../articles/naics.html">NAICS (Industries)</a></li>
    <li><a class="dropdown-item" href="../articles/zipcodes.html">Zipcodes</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For package/app developers</h6></li>
    <li><a class="dropdown-item" href="../articles/dev_deploy-app.html">Deploying the Web App</a></li>
    <li><a class="dropdown-item" href="../articles/dev_run-shinytests.html">Testing EJAM App with shinytest2</a></li>
    <li><a class="dropdown-item" href="../articles/dev_run-unit-tests.html">Testing EJAM Functions with Unit Tests</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update-datasets.html">Updating EJAM Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update_documentation.html">Updating Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/dev_update-package.html">Updating the Package as a New Release</a></li>
    <li><a class="dropdown-item" href="../articles/dev_future_plans.html">Future Plans and Ideas for EJAM</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Deploying the Web App</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM-open/blob/main/vignettes/dev_deploy-app.Rmd" class="external-link"><code>vignettes/dev_deploy-app.Rmd</code></a></small>
      <div class="d-none name"><code>dev_deploy-app.Rmd</code></div>
    </div>

    
    
<p>While the EPA servers hosting the EJAM web application are no longer
up and running as of mid-2025, this document outlines the application
deployment process that had been used. The process involved 1)
development work on an internal/private repo called EJAM that had been
used to deploy an internal/expert version of the web app for staff, and
2) a public repo called EJAM-open that had been used to share the latest
version and publish it to host a public version of the web app for use
in EJScreen (until early 2025).</p>
<div class="section level2">
<h2 id="update-ejam-application">Update EJAM Application<a class="anchor" aria-label="anchor" href="#update-ejam-application"></a>
</h2>
<p>After updating the main branch in the public EJAM code repository
(see <a href="dev_update-package.html">Updating the Package as a New
Release</a> vignette) so that the public repo had the latest
version…</p>
<ol style="list-style-type: decimal">
<li>
<p>Sourced <code>rsconnect_manifest_update.R</code>, using the
public repo as the repo specified in the
<code><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">remotes::install_github()</a></code> command.</p>
<ol style="list-style-type: lower-alpha">
<li>In this way, we were updating the <code>manifest.json</code> file in
the repo from which the web app was deployed, but with reference to the
repo that was public (since those were not the same repo).</li>
<li>It was important to use the public repo as this ensured the Posit
Connect server for the hosted site could install the EJAM package as a
dependency. (It did not necessarily have access to the private EJAM
repo)</li>
</ol>
</li>
<li>
<p>Updated Staging + Production servers</p>
<ol style="list-style-type: lower-alpha">
<li>Merged EJAM’s main branch into the PUBLIC-EJSCREEN branch (in the
repo to be deployed from)</li>
<li>Ensured <code>isPublic</code> parameter was set to TRUE in the call
to the <code><a href="../reference/run_app.html">run_app()</a></code> function in <code>app.R</code>
<ol style="list-style-type: lower-roman">
<li>The <code>isPublic</code> flag determined whether to show the public
or internal/expert version of the web application.</li>
</ol>
</li>
<li>The branch PUBLIC-EJSCREEN was automatically connected to the public
site, so changes to this branch were automatically pulled into the
site.</li>
</ol>
</li>
<li>
<p>Updated Deploy Posit server</p>
<ol style="list-style-type: lower-alpha">
<li>Merged EJAM’s main branch into the deploy-posit branch (in the repo
to be deployed from)</li>
<li>Ensured <code>isPublic</code> parameter was set to FALSE</li>
<li>deploy-posit was automatically connected to the
development/internal/expert version of the web app, so changes to this
branch were automatically pulled into the site.</li>
</ol>
</li>
<li><p>Merged main back into development so that development would have
the updated <code>manifest.json</code> file. This ensured all branches
were consistent.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="potential-improvements">Potential Improvements<a class="anchor" aria-label="anchor" href="#potential-improvements"></a>
</h2>
<p>One way to improve this process would be to modify the
<code>isPublic</code> toggle to be an environment variable. This would
allow us to set the value once in each application server, and not have
to change it each time we push updates. Moreover, it would make testing
the public and internal versions of the app easier to handle in the
GitHub actions (see shinytests vignette).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>2025</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.4</p>
</div>

    </footer>
</div>





  </body>
</html>
